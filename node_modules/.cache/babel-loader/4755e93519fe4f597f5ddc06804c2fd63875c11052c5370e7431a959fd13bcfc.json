{"ast":null,"code":"var _jsxFileName = \"/Users/guilhermelemospimentel/Documents/Trybe/projetos/sd-028-b-project-trivia-react-redux/src/Pages/Login.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n// import md5 from 'crypto-js/md5';\nimport BtnSettings from '../components/BtnSettings';\nimport { actionLoginSuccess } from '../redux/actions';\nimport { tokenEndpoint } from '../services/Api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      name: '',\n      gravatarEmail: ''\n    };\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n    this.handleClick = async () => {\n      const {\n        history\n      } = this.props;\n      const ENDPOINT = 'https://opentdb.com/api_token.php?command=request';\n      const response = await fetch(ENDPOINT);\n      const data = await response.json();\n      localStorage.setItem('token', data.token);\n      history.push('/game');\n    };\n  }\n  render() {\n    const {\n      gravatarEmail,\n      name\n    } = this.state;\n    const {\n      history\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: [\"NOME\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          \"data-testid\": \"input-player-name\",\n          id: \"name\",\n          name: \"name\",\n          value: name,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: [\"EMAIL\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          \"data-testid\": \"input-gravatar-email\",\n          id: \"email\",\n          name: \"gravatarEmail\",\n          value: gravatarEmail,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          \"data-testid\": \"btn-play\",\n          type: \"button\",\n          onClick: this.handleClick,\n          disabled: !gravatarEmail.match(/\\S+@\\S+\\.\\S+/) || name.length === 0,\n          children: \"Play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BtnSettings, {\n          history: history\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n}\nLogin.propTypes = {\n  history: PropTypes.objectOf\n}.isRequired;\nconst mapDispatchToProps = {\n  fetchingToken: tokenEndpoint,\n  infoLogin: actionLoginSuccess\n};\nexport default connect(null, mapDispatchToProps)(Login);","map":{"version":3,"names":["React","Component","PropTypes","connect","BtnSettings","actionLoginSuccess","tokenEndpoint","Login","state","name","gravatarEmail","handleChange","target","value","setState","handleClick","history","props","ENDPOINT","response","fetch","data","json","localStorage","setItem","token","push","render","match","length","propTypes","objectOf","isRequired","mapDispatchToProps","fetchingToken","infoLogin"],"sources":["/Users/guilhermelemospimentel/Documents/Trybe/projetos/sd-028-b-project-trivia-react-redux/src/Pages/Login.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n// import md5 from 'crypto-js/md5';\nimport BtnSettings from '../components/BtnSettings';\nimport { actionLoginSuccess } from '../redux/actions';\nimport { tokenEndpoint } from '../services/Api';\n\nclass Login extends Component {\n  state = {\n    name: '',\n    gravatarEmail: '',\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({ [name]: value });\n  };\n\n  // handleClick = (e) => {\n  //   e.preventDefault();\n  //   const { history, infoLogin, fetchingToken } = this.props;\n  //   const { gravatarEmail, name } = this.state;\n  //   const mdiHash = md5(gravatarEmail).toString();\n  //   const imgGravatar = `https://www.gravatar.com/avatar/${mdiHash}`;\n  //   infoLogin({ name, gravatarEmail, imgGravatar });\n  //   fetchingToken(tokenEndpoint());\n\n  //   history.push('/game');\n  // };\n\n  handleClick = async () => {\n    const { history } = this.props;\n    const ENDPOINT = 'https://opentdb.com/api_token.php?command=request';\n\n    const response = await fetch(ENDPOINT);\n    const data = await response.json();\n    localStorage.setItem('token', data.token);\n    history.push('/game');\n  };\n\n  render() {\n    const { gravatarEmail, name } = this.state;\n    const { history } = this.props;\n\n    return (\n      <div>\n\n        <label\n          htmlFor=\"name\"\n        >\n          NOME\n          <input\n            type=\"text\"\n            data-testid=\"input-player-name\"\n            id=\"name\"\n            name=\"name\"\n            value={ name }\n            onChange={ this.handleChange }\n          />\n        </label>\n\n        <label\n          htmlFor=\"email\"\n        >\n          EMAIL\n          <input\n            type=\"email\"\n            data-testid=\"input-gravatar-email\"\n            id=\"email\"\n            name=\"gravatarEmail\"\n            value={ gravatarEmail }\n            onChange={ this.handleChange }\n          />\n        </label>\n\n        <div>\n          <button\n            data-testid=\"btn-play\"\n            type=\"button\"\n            onClick={ this.handleClick }\n            disabled={ !gravatarEmail\n              .match(/\\S+@\\S+\\.\\S+/) || name.length === 0 }\n          >\n            Play\n          </button>\n\n          <BtnSettings history={ history } />\n\n        </div>\n\n      </div>\n    );\n  }\n}\nLogin.propTypes = {\n  history: PropTypes.objectOf,\n}.isRequired;\n\nconst mapDispatchToProps = {\n  fetchingToken: tokenEndpoint,\n  infoLogin: actionLoginSuccess,\n};\n\nexport default connect(null, mapDispatchToProps)(Login);\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,OAAO,QAAQ,aAAa;AACrC;AACA,OAAOC,WAAW,MAAM,2BAA2B;AACnD,SAASC,kBAAkB,QAAQ,kBAAkB;AACrD,SAASC,aAAa,QAAQ,iBAAiB;AAAC;AAEhD,MAAMC,KAAK,SAASN,SAAS,CAAC;EAAA;IAAA;IAAA,KAC5BO,KAAK,GAAG;MACNC,IAAI,EAAE,EAAE;MACRC,aAAa,EAAE;IACjB,CAAC;IAAA,KAEDC,YAAY,GAAG,QAAgB;MAAA,IAAf;QAAEC;MAAO,CAAC;MACxB,MAAM;QAAEH,IAAI;QAAEI;MAAM,CAAC,GAAGD,MAAM;MAC9B,IAAI,CAACE,QAAQ,CAAC;QAAE,CAACL,IAAI,GAAGI;MAAM,CAAC,CAAC;IAClC,CAAC;IAAA,KAcDE,WAAW,GAAG,YAAY;MACxB,MAAM;QAAEC;MAAQ,CAAC,GAAG,IAAI,CAACC,KAAK;MAC9B,MAAMC,QAAQ,GAAG,mDAAmD;MAEpE,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,QAAQ,CAAC;MACtC,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;MAClCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,IAAI,CAACI,KAAK,CAAC;MACzCT,OAAO,CAACU,IAAI,CAAC,OAAO,CAAC;IACvB,CAAC;EAAA;EAEDC,MAAM,GAAG;IACP,MAAM;MAAEjB,aAAa;MAAED;IAAK,CAAC,GAAG,IAAI,CAACD,KAAK;IAC1C,MAAM;MAAEQ;IAAQ,CAAC,GAAG,IAAI,CAACC,KAAK;IAE9B,oBACE;MAAA,wBAEE;QACE,OAAO,EAAC,MAAM;QAAA,WACf,MAEC;UACE,IAAI,EAAC,MAAM;UACX,eAAY,mBAAmB;UAC/B,EAAE,EAAC,MAAM;UACT,IAAI,EAAC,MAAM;UACX,KAAK,EAAGR,IAAM;UACd,QAAQ,EAAG,IAAI,CAACE;QAAc;UAAA;UAAA;UAAA;QAAA,QAC9B;MAAA;QAAA;QAAA;QAAA;MAAA,QACI,eAER;QACE,OAAO,EAAC,OAAO;QAAA,WAChB,OAEC;UACE,IAAI,EAAC,OAAO;UACZ,eAAY,sBAAsB;UAClC,EAAE,EAAC,OAAO;UACV,IAAI,EAAC,eAAe;UACpB,KAAK,EAAGD,aAAe;UACvB,QAAQ,EAAG,IAAI,CAACC;QAAc;UAAA;UAAA;UAAA;QAAA,QAC9B;MAAA;QAAA;QAAA;QAAA;MAAA,QACI,eAER;QAAA,wBACE;UACE,eAAY,UAAU;UACtB,IAAI,EAAC,QAAQ;UACb,OAAO,EAAG,IAAI,CAACI,WAAa;UAC5B,QAAQ,EAAG,CAACL,aAAa,CACtBkB,KAAK,CAAC,cAAc,CAAC,IAAInB,IAAI,CAACoB,MAAM,KAAK,CAAG;UAAA,UAChD;QAED;UAAA;UAAA;UAAA;QAAA,QAAS,eAET,QAAC,WAAW;UAAC,OAAO,EAAGb;QAAS;UAAA;UAAA;UAAA;QAAA,QAAG;MAAA;QAAA;QAAA;QAAA;MAAA,QAE/B;IAAA;MAAA;MAAA;MAAA;IAAA,QAEF;EAEV;AACF;AACAT,KAAK,CAACuB,SAAS,GAAG;EAChBd,OAAO,EAAEd,SAAS,CAAC6B;AACrB,CAAC,CAACC,UAAU;AAEZ,MAAMC,kBAAkB,GAAG;EACzBC,aAAa,EAAE5B,aAAa;EAC5B6B,SAAS,EAAE9B;AACb,CAAC;AAED,eAAeF,OAAO,CAAC,IAAI,EAAE8B,kBAAkB,CAAC,CAAC1B,KAAK,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}